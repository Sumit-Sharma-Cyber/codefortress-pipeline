# Week 4: DevSecOps Pipeline Automation & Remediation

## Project Overview
This week focused on automating the security pipeline for the **CodeFortress-pipeline** project and remediating critical vulnerabilities identified in previous weeks.

## üõ†Ô∏è Security Tools Integrated
The following tools were integrated into the automated `run_scans.sh` script:
* **TruffleHog**: Scanned for hardcoded secrets and AWS credentials.
* **SonarQube (SAST)**: Performed Static Application Security Testing on `app.py`.
* **OWASP ZAP (DAST)**: Conducted Dynamic Application Security Testing against the running Flask application.
* **DefectDojo**: Centralized all scan results for vulnerability management.

## ‚úÖ Remediation Steps Taken
1. **Secret Management**: Removed hardcoded AWS keys from the source code and updated the `.gitignore` to prevent future leaks.
2. **XSS Mitigation**: Sanitized user inputs in `app.py` using Jinja2 auto-escaping to prevent Cross-Site Scripting (XSS) attacks.
3. **Pipeline Automation**: Created a shell script to execute all scans and automatically upload results to the DefectDojo Engagement.

# üõ°Ô∏è CodeFortress: DevSecOps Pipeline Automation

## üë• Project Team
* **Lead Developer:** Sumit Sharma
* **Security Analyst:** Chinmai Raj
* **Security Engineer:** Dhanajayasingh

---

## üîç What is DefectDojo?
DefectDojo is an open-source **Vulnerability Management Tool** that serves as a central hub for all security findings. In this project, we used it to:
* **Aggregate Scans:** Combine results from SAST (SonarQube), DAST (ZAP), and Secret scanning (TruffleHog).
* **Track Remediation:** Monitor which bugs were fixed and which are still active.
* **Generate Reports:** Create professional PDF audit reports for management.

---

## üöÄ How to Use This Pipeline
Follow these steps to replicate our security workflow:

### Step 1: Environment Setup
Ensure your tools are running. For this project, we used:
* **DefectDojo** (Running on `localhost:8888`)
* **SonarQube** (Running on `localhost:9000`)
* **OWASP ZAP** (Standard installation)

### Step 2: Running the Automated Scan
We developed a shell script `run_scans.sh` to handle the heavy lifting.
```bash
chmod +x run_scans.sh
./run_scans.sh

Step 3: Importing to DefectDojo
Navigate to your Product (CodeFortress-pipeline).

Create an Engagement (e.g., "Initial Scan").

Use the "Import Scan Results" button to upload the .json files generated by our script.

How We Built It (Our Process)
1. Static Analysis (SAST)
We used SonarQube to scan our Python source code (app.py). We identified and fixed a Cross-Site Scripting (XSS) vulnerability by implementing proper input sanitization.

2. Secret Detection
We ran TruffleHog to scan the git history. We discovered exposed AWS Access Keys, which we immediately revoked and moved to secure environment variables.

3. Dynamic Analysis (DAST)
Using OWASP ZAP, we attacked the running application to identify runtime vulnerabilities.

4. Integration & Reporting
We linked all 6 tests into a single DefectDojo Engagement. This allowed us to generate the final Security Audit PDF which proves the "Security Posture" of the application.

